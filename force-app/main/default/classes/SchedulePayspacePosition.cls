public class SchedulePayspacePosition implements Schedulable {
    public void execute(SchedulableContext sc) {
        try {
            // Query employees to be synced, filter out those already synced (Sync_With_Payspace = TRUE)
            List<flair__Employee__c> employeesToSync = [SELECT Id, flair__Employee_Number__c, flair__Start_Date__c, 
                                                        Position_Created_On_PaySpace__c, flair__Entity__r.Name, flair__Position__c
                                                        FROM flair__Employee__c 
                                                        WHERE Position_Created_On_PaySpace__c = FALSE
                                                        AND LastModifiedDate > YESTERDAY
                                                        LIMIT 50
                                                       ];
            
            // Enqueue the Queueable job for each employee
            for (flair__Employee__c employee : employeesToSync) {
                
                Map<String, Object> employeeData = new Map<String, Object> {
                    
                    	'EmployeePositionId' => 0, //This will be auto generated by PaySpace. No need to create this field is Salesforce
                        'EmployeeNumber' => employee.flair__Employee_Number__c,
                        'EffectiveDate' => employee.flair__Start_Date__c,
                        'OrganizationPositionWithCode' => employee.flair__Position__c, 
                        'OrganizationGroup' => 'Lapaire Glasses Burkina-Faso SARL'
                        
                        };
                            
                            // Call Queueable job to send the employee to Payspace
                            System.enqueueJob(new PayspacePositionQueueable(employeeData, employee.Id));
            }
        } catch (Exception e) {
            System.debug('Error while scheduling Payspace sync: ' + e.getMessage());
        }
    }
}